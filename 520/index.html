<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    @keyframes blink {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    body {
      background-color: rgba(250, 198, 206,.5);
    }
    #content::after {
      content: '|';
      animation: blink 1000ms infinite;
    }
    #content {
      padding: 20px;
      /* background: url(love.jpeg); */
    }
  </style>
</head>

<body>

  <div id="content"></div>
  <script>
    !function(){function e(t){return"function"==typeof t||!(!t||"object"!=typeof t)&&e(t.listener)}function t(e,t){if(e.indexOf)return e.indexOf(t);for(var n=-1,o=0,i=e.length;o<i;o++)if(e[o]===t){n=o;break}return n}function n(){this.__events={}}var o="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global||this||{};n.VERSION="1.0.0";var i=n.prototype;i.on=function(n,o){if(n&&o){if(!e(o))throw new TypeError("listener must be a function");var i=this.__events,r=i[n]=i[n]||[],f="object"==typeof o;return-1===t(r,o)&&r.push(f?o:{listener:o,once:!1}),this}},i.once=function(e,t){return this.on(e,{listener:t,once:!0})},i.off=function(e,t){var n=this.__events[e];if(n){for(var o,i=0,r=n.length;i<r;i++)if(n[i]&&n[i].listener===t){o=i;break}return void 0!==o&&n.splice(o,1,null),this}},i.emit=function(e,t){var n=this.__events[e];if(n){for(var o=0;o<n.length;o++){var i=n[o];i&&(i.listener.apply(this,t||[]),i.once&&this.off(e,i.listener))}return this}},i.allOff=function(e){e&&this.__events[e]?this.__events[e]=[]:this.__events={}},"undefined"==typeof exports||exports.nodeType?o.EventEmitter=n:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=n),exports.EventEmitter=n)}();
  </script>
  <script>
    !function () { function t(t, e, n) { EventEmitter.call(this), this.element = "string" == typeof t ? document.querySelector(t) : t, this.arr = e, this.textArr = [], this.options = i.extend({}, this.constructor.defaultOptions, n), this.index = 0, this.handle() } var e = "object" == typeof self && self.self == self && self || "object" == typeof global && global.global == global && global || this || {}, i = { extend: function (t) { for (var e = 1, i = arguments.length; e < i; e++)for (var n in arguments[e]) arguments[e].hasOwnProperty(n) && (t[n] = arguments[e][n]); return t } }; t.VERSION = "1.0.0", t.defaultOptions = { speed: 200, type: "" }; var n = t.prototype = new EventEmitter; n.constructor = t, n.handle = function () { var t = this.arr[this.index]; if (!t) return this.render(!0), void this.emit("end"); switch (t.type) { case "text": this.handleText(t); break; case "wait": this.handleWait(t); break; case "delete": this.handleDelete(t); break; case "br": this.handleBr(t); break; case "img": this.handleImg(t); break; default: this.handlePlainText(t) } }, n.handleText = function (t) { var e = t.text.split(""); this.type(e, 0, t.time ? t.time : this.options.speed) }, n.type = function (t, e, i) { e < t.length ? (this.textArr.push(t[e]), this.render(), setTimeout(this.type.bind(this), i, t, ++e, i)) : (this.index++, this.handle()) }, n.render = function (t) { this.element.innerHTML = this.textArr.join("") + (t ? "" : this.options.type), this.element.scrollTop = this.element.scrollHeight }, n.handleWait = function (t) { this.index++, setTimeout(this.handle.bind(this), t.time ? t.time : this.options.speed) }, n.handleDelete = function (t) { this.delete(t.num, t.time ? t.time : this.options.speed) }, n.delete = function (t, e) { t > 0 ? (this.textArr.pop(), this.render(), setTimeout(this.delete.bind(this), e, --t, e)) : this.next() }, n.handleBr = function (t) { this.textArr.push("<br /><br />"), this.index++, setTimeout(this.handle.bind(this), t.time ? t.time : this.options.speed) }, n.handleImg = function (t) { var e = ["<img "]; for (var i in t) e.push(i + '="' + t[i] + '" '); e.push(" />"), this.textArr.push(e.join("")), this.render(); var n = this; setTimeout(function () { n.next() }, t.time ? t.time : this.options.speed) }, n.handlePlainText = function (t) { this.textArr.push(t), this.render(); var e = this; setTimeout(function () { e.next() }, t.time ? t.time : this.options.speed) }, n.next = function () { this.index++, this.handle() }, "undefined" == typeof exports || exports.nodeType ? e.AutoType = t : ("undefined" != typeof module && !module.nodeType && module.exports && (exports = module.exports = t), exports.AutoType = t) }();
  </script>
  <script>
    var arr = [
    { type: 'text', text: 'å¼ èµ›ï¼Œæˆ‘å®¶è€å…¬ï¼Œæ˜¯ä¸ªåè¶³çš„ç›´ç”·ï¼Œå—¯ï¼Ÿ'},
    { type: 'wait', time: 900 },
    { type: 'delete', num: 5},
    { type: 'text', text: 'æš–ç”·ï¼Œå¤§å®è´ï¼Œå—¯!'},
    { type: 'br' },
    { type: 'text', text: 'èµ›èµ›æ¸©æ–‡å°”é›…ï¼Œè€å¿ƒåè¶³'},
    { type: 'text', text: 'ï¼Œå¯Œæœ‰è´£ä»»å¿ƒï¼Œä½ è‡ªå·±è§‰å¾—è‡ªå·±é•¿å¾—ä¸å¥½çœ‹ï¼Œå“ˆå“ˆğŸ˜„ã€‚ä½†æ˜¯æˆ‘è§‰å¾—å¾ˆå¥½ï¼Œå¾ˆç¬¦åˆæˆ‘çš„æ‹©å¶æ ‡å‡†ï¼Œç¬‘èµ·æ¥å¾ˆå¥½çœ‹ï¼Œçœ¼ç›å˜´è§’éƒ½æ˜¯æˆ‘å–œæ¬¢çš„æ ·å­ï¼å“ˆï¼Œä½ ä¸€å®šåœ¨è®²æˆ‘èŠ±ç—´äº†ï¼Œä¸ç®¡äº†ğŸ˜ğŸ˜', time: 50},
    { type: 'br' },
    { type: 'text', text: 'è¯´çœŸçš„ï¼Œç¬¬ä¸€æ¬¡è§åˆ°ä½ å°±å¯¹ä½ æœ‰å¥½æ„Ÿï¼Œä¹Ÿè¿˜æƒ³è¿‡ä½ å°†æ¥ä¼šä¸ä¼šæˆä¸ºæˆ‘ç”·æœ‹å‹å‘¢ï¼Œå˜»å˜»åé¢æœç„¶æ˜¯äº†ã€‚ä»¥å‰åœ¨çº¬åˆ›çš„æ—¶å€™ï¼Œåœ¨çº¿ä¸Šç¢°åˆ°ä½ å°±è§‰å¾—å“ˆå“ˆï¼Œç»ˆäºæœ‰äººå’Œæˆ‘è®²è¯äº†ï¼Œå¼€å¿ƒğŸ˜„', time: 50},
    { type: 'br' },
    {type: 'text', text: 'è°¢è°¢æˆ‘å®¶äº²çˆ±çš„ï¼Œå¯¹æˆ‘å¦‚æ­¤æ”¯æŒï¼ŒåŒ…å®¹æˆ‘çš„åè„¾æ°”ï¼Œçˆ±ä½ â¤ï¸~'},
    { type: 'wait', time: 900 },
    { type: 'img', src: 'love.jpeg', id: "laogong", style: "width: 50%;display: block;margin-left: auto;margin-right: auto;margin-top: 20px;margin-bottom: 20px;" },
    { type: 'wait', time: 900 },

]

var autoType = new AutoType("#content", arr, {
    // è®¾ç½®æ‰“å­—æ—¶é—´ï¼Œè¡¨ç¤ºåœ¨æ— è®¾ç½®çš„æƒ…å†µä¸‹ï¼Œæ‰“å­—é—´éš”ä¸º 200ms
    speed: 200
});
autoType.once("end", function() {
    console.log('äº‹ä»¶ç»“æŸ');
})
  </script>
</body>

</html>